{% extends "base.html" %} 

{% block content %}
    <h2>Pictures</h2>
    <div id="paginator-container">
        {% include "pictures/pagination.html" %}
    </div>
    <div id="image-container" >
        {% include "pictures/list_partial.html" %}
    </div>
    <br style="clear:both">

    <input type="hidden" id="static-url" value="{{STATIC_URL}}" />
{% endblock %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/jquery.fancybox.css" type="text/css" media="screen" />
{% endblock %}

{% block js %}
    {{ block.super }}
    <script src="{{ STATIC_URL }}js/jquery.isotope.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.fancybox.pack.js"></script>
    <!--script src="{{ STATIC_URL }}js/angular/pictures/directives.js"></script>
    <script src="{{ STATIC_URL }}js/angular/pictures/controllers.js"></script>
    <script src="{{ STATIC_URL }}js/angular/pictures/app.js"></script /-->
    <script>
    $(document).ready( function() {
        $('#paginator-container').on('click', 'a', function() {
            page = $(this).data('page');
            $.ajax({
                'url' : '/pictures/page/'+page+'/',
                'success' : function(data){
                    var $pictures = $(data.pictures_html);
                    $('#image-container').isotope('insert', $pictures);
                    $('#image-container').isotope({filter : '.page'+data.page});
                    $('#paginator-container').html(data.paginator_html);
                },
                'error' : function(data){
                    alert("Server Error");
                }
            });
        });

        $('#image-container').isotope({
            layoutMode : 'masonry',
        });

        $(".fancybox").fancybox();
    });
    </script>
{% endblock %}
